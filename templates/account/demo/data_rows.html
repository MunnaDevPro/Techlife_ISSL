<style>
/* This custom utility class ensures the progress line is rounded.
    Tailwind doesn't have a direct class for stroke-linecap: round on SVG elements.
*/
.stroke-line-cap-round {
    stroke-linecap: round;
}
</style>


<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">

    <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 lg:col-span-1">
        <h3 class="text-lg font-semibold mb-4 border-b border-gray-200 text-gray-800 pb-2">Earning History (Last 30 Days)</h3>

        <div class="w-full flex justify-center items-center h-48">
            <div id="earning-chart" class="relative w-36 h-36" data-progress="75">
                <svg class="w-full h-full transform -rotate-90">
                    <circle 
                        class="text-indigo-200" 
                        stroke-width="8" 
                        stroke="currentColor" 
                        fill="transparent" 
                        r="66" 
                        cx="72" 
                        cy="72"
                    />
                    <circle 
                        class="text-blue-600 transition-all duration-1000 ease-in-out stroke-line-cap-round" 
                        stroke-width="8" 
                        stroke="currentColor" 
                        fill="transparent" 
                        r="66" 
                        cx="72" 
                        cy="72"
                        style="stroke-dasharray: 414.69; stroke-dashoffset: 414.69;" 
                    />
                </svg>
                <div class="absolute inset-0 flex items-center justify-center text-center text-xs text-gray-500">
                    <span class="text-xl font-bold text-gray-800">$450.50</span>
                    <span class="text-xs text-blue-600 absolute bottom-8">Total Payout</span>
                </div>
            </div>
        </div>

        <div class="mt-4 space-y-3">
            <div class="flex justify-between items-center text-sm border-t border-gray-200 pt-3 text-gray-700">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-money-check-alt text-green-600"></i>
                    <span>Payout for "News Article"</span>
                </div>
                <span class="font-bold text-gray-900">$120.00</span>
            </div>
            <div class="flex justify-between items-center text-sm border-t border-gray-200 pt-3 text-gray-700">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-heart text-red-600"></i>
                    <span>Bonus from 500 Likes</span>
                </div>
                <span class="font-bold text-gray-900">$10.50</span>
            </div>
            <div class="flex justify-between items-center text-sm border-t border-gray-200 pt-3 text-gray-700">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-comments text-blue-600"></i>
                    <span>Forum Answer Bonus</span>
                </div>
                <span class="font-bold text-gray-900">$5.00</span>
            </div>
        </div>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 lg:col-span-2">
        <h3 class="text-lg font-semibold mb-4 border-b border-gray-200 text-gray-800 pb-2">Recent User Activities</h3>
        <div class="space-y-4">
            <div class="flex justify-between items-center border-b border-gray-200 pb-3">
                <div class="flex items-start space-x-4">
                    <div class="w-8 h-8 rounded-lg flex items-center justify-center bg-blue-600 text-white flex-shrink-0">
                        <i class="fas fa-newspaper"></i>
                    </div>
                    <div>
                        <p class="font-medium text-gray-800">New Blog Post Published</p>
                        <p class="text-sm text-gray-500">Title: "Future of AI in Journalism"</p>
                    </div>
                </div>
                <div class="text-right text-sm text-gray-500">
                    <p>18 minutes ago</p>
                    <span class="text-xs text-green-600">50 views</span>
                </div>
            </div>
            <div class="flex justify-between items-center border-b border-gray-200 pb-3">
                <div class="flex items-start space-x-4">
                    <div class="w-8 h-8 rounded-lg flex items-center justify-center bg-green-600 text-white flex-shrink-0">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div>
                        <p class="font-medium text-gray-800">Forum: New Question Posted</p>
                        <p class="text-sm text-gray-500">User: "How to optimize Django DB?"</p>
                    </div>
                </div>
                <div class="text-right text-sm text-gray-500">
                    <p>1 hour ago</p>
                    <span class="text-xs text-yellow-600">3 answers</span>
                </div>
            </div>
            <div class="flex justify-between items-center border-b border-gray-200 pb-3">
                <div class="flex items-start space-x-4">
                    <div class="w-8 h-8 rounded-lg flex items-center justify-center bg-indigo-600 text-white flex-shrink-0">
                        <i class="fas fa-comment-alt"></i>
                    </div>
                    <div>
                        <p class="font-medium text-gray-800">New Comment on your Post</p>
                        <p class="text-sm text-gray-500">Comment: "Great analysis!"</p>
                    </div>
                </div>
                <div class="text-right text-sm text-gray-500">
                    <p>35 mins ago</p>
                    <span class="text-xs text-green-600">Reply now</span>
                </div>
            </div>
            <div class="flex justify-between items-center border-b border-gray-200 pb-3">
                <div class="flex items-start space-x-4">
                    <div class="w-8 h-8 rounded-lg flex items-center justify-center bg-red-600 text-white flex-shrink-0">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div>
                        <p class="font-medium text-gray-800">New User Registered</p>
                        <p class="text-sm text-gray-500">Username: NewJournalist24</p>
                    </div>
                </div>
                <div class="text-right text-sm text-gray-500">
                    <p>4 hours ago</p>
                    <span class="text-xs text-green-600">Active</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">

    <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex justify-between items-center">
        <div>
            <h3 class="text-lg font-semibold mb-2 text-gray-800">Total Article Views</h3>
            <div class="text-3xl font-bold text-gray-900">45,850</div>
            <div class="text-green-600 text-sm font-medium mt-1">+1.5% (Last 7 Days)</div>
        </div>
        <i class="fas fa-eye text-4xl text-gray-300"></i>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex justify-between items-center">
        <div>
            <h3 class="text-lg font-semibold mb-2 text-gray-800">Total Forum Answers</h3>
            <div class="text-3xl font-bold text-gray-900">5,200</div>
            <div class="text-red-600 text-sm font-medium mt-1">-2.3% (Unanswered Qs)</div>
        </div>
        <i class="fas fa-comments text-4xl text-gray-300"></i>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex justify-between items-center">
        <div>
            <h3 class="text-lg font-semibold mb-2 text-gray-800">Total Post Likes</h3>
            <div class="text-3xl font-bold text-gray-900">10,539</div>
            <div class="text-green-600 text-sm font-medium mt-1">+8.1% (Engagement Rate)</div>
        </div>
        <i class="fas fa-heart text-4xl text-gray-300"></i>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
    const chart = document.getElementById('earning-chart');
    if (!chart) return;

    const progressElement = chart.querySelector('circle:nth-child(2)'); // Foreground circle
    const progressValue = parseInt(chart.dataset.progress) || 0; // 75%
    const circumference = 2 * Math.PI * 66; // 66 is the radius (r)

    // Set the initial state (fully hidden)
    progressElement.style.strokeDasharray = circumference;
    progressElement.style.strokeDashoffset = circumference;
    
    // Calculate the final offset based on the percentage
    const offset = circumference - (progressValue / 100) * circumference;
    
    // Intersection Observer to trigger animation on scroll
    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // When element enters viewport, start animation
                progressElement.style.strokeDashoffset = offset;
                
                // Stop observing once animated
                observer.unobserve(entry.target);
            }
        });
    }, {
        // Options
        root: null, // Use the viewport as the root
        threshold: 0.5 // Trigger when 50% of the element is visible
    });

    observer.observe(chart);
});
</script>