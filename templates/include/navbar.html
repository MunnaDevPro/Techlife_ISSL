{% load static %}

<style>
    /* for hover effect */
    /* Custom Button Hover Effect for Main Navbar Links */
    /* Targetting the main links in the lower navigation bar */
    .navbar-link-button-effect {
        /* Base style: Padding and color already handled by Tailwind classes in HTML */

        /* Smooth Transition for the new button properties */
        transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease, border-radius 0.3s ease, box-shadow 0.3s ease;

        /* Tailwind utilities (text-gray-700, font-medium) ke override/enhance korbe */
    }

    /* Hover State */
    .navbar-link-button-effect:hover {
        /* Background Fill: Button er main color */
        background-color: #3498db; /* Ekta professional Blue shade use kora holo */

        /* Text Color Change */
        color: white !important; /* Tailwind er hover:text-blue-600 ke override korar jonno !important use kora holo */

        /* Square feel: Halka border-radius 2px er theke 0px kore dilam */
        border-radius: 2px;

        /* Button Pop Effect: Halkaa boro hobe */
        transform: scale(1.03);

        /* Button feel dewar jonno subtle shadow */
        box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4); /* Shadow color ta background color er shathe match kora */
    }

    /* Optional: Dropdown Menu Item-er jonno ekta halka effect */
    .group-hover:opacity-100 a:hover {
        background-color: #ecf0f1 !important; /* Dropdown items halka gray hobe */
        color: #2c3e50 !important;
    }

    .btn {
        position: relative;
        font-size: 1rem;
        font-weight: 600;
        color: #6e74f5;
        background: none;
        border: 1px solid #6e74f5;
        border-radius: 6px;
        cursor: pointer;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .liquid {
        background: linear-gradient(#545cf5 0 0) no-repeat calc(200% - var(--p, 0%)) 100% / 200% var(--p, 0.2em);
        transition: 0.3s var(--t, 0s), background-position 0.3s calc(0.3s - var(--t, 0s));
    }

    .liquid:hover {
        --p: 100%;
        --t: 0.3s;
        color: #fff;
    }

    .btn1 {
        position: relative;
        font-size: 1rem;
        font-weight: 600;
        color: #6e74f5;
        background: none;
        border: 1px solid #6e74f5;
        border-radius: 6px;
        cursor: pointer;
        overflow: hidden;
        transition: all 0.3s ease;
    }

    .liquid1 {
        background: linear-gradient(#6e74f5 0 0) no-repeat calc(200% - var(--p, 0%)) 100% / 200% var(--p, 0.2em);
        transition: 0.3s var(--t, 0s), background-position 0.3s calc(0.3s - var(--t, 0s));
    }

    .liquid1:hover {
        --p: 100%;
        --t: 0.3s;
        color: #fff;
    }
</style>

<header class="navbar_for_hidden bg-white border-b border-gray-300 shadow-sm fixed top-0 w-full z-50 font-inter text-gray-300" >
    <div class="flex items-center justify-between max-w-7xl mx-auto py-3 px-4 border-b border-gray-100">
        <div class="flex items-center space-x-4 w-1/3 justify-start lg:w-auto lg:flex-grow-0 max-w-7">
            <button id="menu-toggle" class="lg:hidden text-xl text-gray-700 cursor-pointer focus:outline-none">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <div class="flex items-center space-x-1">
            <span class="flex items-center text-sm text-gray-600 font-medium hidden sm:flex space-x-1">
                <i class="fa-solid fa-calendar"></i>
                <span>{{ current_date }}</span>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="text-gray-500">
                    <path d="M8.75008 1.25V2.58333M3.00008 8.33333H1.66675M4.54275 4.12614L3.59993 3.18333M12.9583 4.12614L13.9011 3.18333M15.8334 8.33333H14.5001M5.41681 8.3334C5.41681 6.49245 6.90919 5.00006 8.75014 5.00006C10.0052 5.00006 11.0982 5.69363 11.6668 6.71838M5.00008 18.3333C3.15913 18.3333 1.66675 16.8409 1.66675 15C1.66675 13.1591 3.15913 11.6667 5.00008 11.6667C5.3869 11.6667 5.75834 11.7326 6.10377 11.8537C6.70059 10.283 8.21997 9.16667 10.0001 9.16667C11.7802 9.16667 13.2996 10.283 13.8964 11.8537C14.2418 11.7326 14.6133 11.6667 15.0001 11.6667C16.841 11.6667 18.3334 13.1591 18.3334 15C18.3334 16.8409 16.841 18.3333 15.0001 18.3333C11.1332 18.3333 8.23275 18.3333 5.00008 18.3333Z" stroke="currentColor" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
            </span>
        </div>

        <div class="flex-grow flex justify-center items-center">
            <img src="{% static 'image/logo-front.png' %}" alt="Logo" class="h-10" />
        </div>

        <div class="flex items-center space-x-3 text-sm font-semibold w-1/3 justify-end lg:w-auto lg:flex-grow-0">
            <a href="http://127.0.0.1:8000/forum/all_question/" class="btn liquid hidden lg:block px-3 py-2 pb-2 border border-blue-500 text-blue-500 hover:bg-gray-100 transition duration-150">Forum</a>
            <!-- <a href="#"  class="hidden lg:block px-3 py-2 border border-blue-500 text-blue-500 hover:bg-blue-50 transition duration-150 rounded-sm">Login</a> -->
            <!-- <a href="{% url 'signup' %}" id="form-open" class="btn liquid hidden lg:block px-3 py-2 pb-2 border border-blue-500 text-blue-500 hover:bg-gray-100 transition duration-150">Login</a> -->
            
        {% if request.user.is_authenticated and request.user.is_verified %}
            <!-- <a href="{% url 'logout' %}" class="btn liquid hidden lg:block px-3 py-2 pb-2 border border-red-500 text-red-500 hover:bg-gray-100 transition duration-150">Logout</a> -->
            <a class="w-12 h-12 cursor-pointer" href="{% url 'user_dashboard' %}">
                <img src="{{ user.profile_picture.url|default:'/static/image/default_user.png' }}" 
                alt="{{ user.first_name|slice:'1' }}"
                    class="w-full h-full rounded-full border-2 border-blue-500 object-cover flex items-center justify-center text-3xl">
            </a>
        {% else %}
            <a href="{% url 'login' %}" class="btn liquid hidden lg:block px-3 py-2 pb-2 border border-blue-500 text-blue-500 hover:bg-gray-100 transition duration-150">Login</a>
        {% endif %}

                    <!-- <a href="#" class="btn1 liquid1 hidden lg:block px-3 py-2 border border-gray-600 text-gray-700 hover:bg-blue-50 transition duration-150 rounded-sm">Today's News</a> -->

            <a hx-get="{% url 'create_blog' %}" hx-target="#container" hx-swap="innerHTML" hx-push-url="true" class="lg:hidden text-gray-700 text-base font-medium hover:text-blue-600 transition duration-150">
                <i class="fa fa-search"></i>
            </a>
        </div>
    </div>

    <nav class="max-w-7xl mx-auto px-4 py-2 hidden lg:block">
        <ul class="flex items-center justify-start space-x-6">
            <li>
                <a href="{% url 'homepage' %}" class="text-gray-700 text-base font-medium hover:text-blue-600 transition duration-150 cursor-pointer">Home</a>
            </li>
            <li>
                <a href="http://127.0.0.1:8000/forum/all_question/" class="text-gray-700 text-base font-medium hover:text-blue-600 transition duration-150 cursor-pointer">Question</a>
            </li>
             <li>
                <a hx-get="{% url 'create_blog' %}" hx-target="#container" hx-swap="innerHTML" hx-push-url="true" class="text-gray-700 text-base font-medium hover:text-blue-600 transition duration-150 cursor-pointer">Create Blog</a>
            </li>
            <li class="group relative">
                <a href="#" class="text-gray-700 text-base font-medium hover:text-blue-600 transition duration-150 flex items-center cursor-pointer">
                    Country
                    <i class="fas fa-chevron-down text-xs ml-1 text-gray-500 group-hover:text-blue-600 transition duration-150"></i>
                </a>
                <div class="absolute rounded-b-xl left-0 top-full mt-0 w-48 bg-white border border-gray-200 shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible group-hover:mt-2 transition-all duration-300 ease-in-out">
                    <ul class="py-2">
                        <li class="px-4 py-2 hover:bg-gray-100">
                            <a href="{% url 'category_post' 'technology' %}" class="text-gray-700 text-sm pl-5 block hover:text-blue-600 transition duration-150">Bangladesh</a>
                        </li>
                        <li class="px-4 py-2 hover:bg-gray-100">
                            <a href="{% url 'category_post' 'sports' %}" class="text-gray-700 text-sm pl-5 block hover:text-blue-600 transition duration-150">Asia</a>
                        </li>
                        <li class="px-4 py-2 hover:bg-gray-100">
                            <a href="{% url 'category_post' 'lifestyle' %}" class="text-gray-700 text-sm pl-5 block hover:text-blue-600 transition duration-150">World</a>
                        </li>
                    </ul>
                </div>
            </li>
            

            
            
            {% for category in popular_categories|slice:"4" %}
                <li>
                <!-- <a hx-get="{% url 'category_post' category.slug %}" hx-target="#container" hx-push-url="true" hx-swap="innerHTML" class="text-gray-700 text-base font-medium hover:text-blue-600 transition duration-150 cursor-pointer">{{ category.name }}</a> -->
                <a hx-get="{% url 'category_post' category.slug %}" hx-target="#container" hx-swap="innerHTML"  hx-push-url="true" class="text-gray-700 text-base font-medium hover:text-blue-600 transition duration-150 cursor-pointer">{{ category.name }}</a>

                </li>
            {% endfor %}
                
           
            


           

            <li class="group relative">
                <a href="#" class="text-gray-700 text-base font-medium hover:text-blue-600 transition duration-150 flex items-center cursor-pointer">
                    More
                    <i class="fas fa-chevron-down text-xs ml-1 text-gray-500 group-hover:text-blue-600 transition duration-150"></i>
                </a>
                <div class="absolute rounded-b-xl right-0 top-full mt-0 w-96 bg-white border border-gray-200 shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible group-hover:mt-2 transition-all duration-300 ease-in-out">
                    <ul class="py-4  grid grid-cols-2 gap-y-1 w-full px-4 divide-x divide-gray-200">
                        {% for category in popular_categories|slice:"4:" %}
                        <li class="col-span-1">
                            <a hx-get="{% url 'category_post' category.slug %}" hx-target="#container" hx-swap="innerHTML"  hx-push-url="true" class="text-gray-700 cursor-pointer text-md px-3 py-1 hover:bg-gray-100 block rounded-md hover:text-blue-600 transition duration-150">{{ category.name }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </li>
            <li class="hidden lg:block">
                <form hx-get="{% url 'redirect_search_results' %}" hx-target="#container" hx-swap="innerHTML" hx-push-url="true" method="GET" class="relative w-56"> 
    <input type="search" name="q" placeholder="Search News..." class="text-gray-950 w-72 px-4 py-2 pr-10 text-sm border border-gray-300 rounded-full focus:outline-none focus:border-blue-500 transition duration-150" />
    <button type="submit" class="absolute inset-y-0 left-64 flex items-center pr-3 text-gray-500 hover:text-blue-600 transition duration-150">
        <i class="fa fa-search"></i>
    </button>
</form>
            </li>
        </ul>
    </nav>

    <div id="mobile-sidebar" class="fixed top-0 left-0 h-full w-64 bg-white shadow-xl transform translate-x-[-100%] transition-transform duration-300 ease-in-out z-[60] lg:hidden">
        <div class="p-4 border-b">
            <button id="close-sidebar" class="text-xl text-gray-700 focus:outline-none">
                <i class="fas fa-times"></i>
            </button>
            <img src="{% static 'image/logo-front.png' %}" alt="Logo" class="h-10 mx-auto mt-2" />
        </div>

        <ul class="flex flex-col p-4 space-y-2">
            <li class="py-2">
                <div class="text-gray-700 text-base font-medium flex items-center justify-between">
                    News
                    <i class="fas fa-chevron-down text-xs ml-1 text-gray-500"></i>
                </div>
                <ul class="pl-4 mt-1 space-y-1 text-sm">
                    <li><a href="{% url 'category_post' 'technology' %}" class="text-gray-600 hover:text-blue-600 block py-1">Bangladesh</a></li>
                    <li><a href="{% url 'category_post' 'sports' %}" class="text-gray-600 hover:text-blue-600 block py-1">Asia</a></li>
                    <li><a href="{% url 'category_post' 'lifestyle' %}" class="text-gray-600 hover:text-blue-600 block py-1">World</a></li>
                </ul>
            </li>

            <li>
                <a hx-get="{% url 'popular_blogs' %}" hx-target="#container" hx-push-url="true" hx-swap="innerHTML" class="text-gray-700 text-base font-medium hover:text-blue-600 block py-2">Popular</a>
            </li>
            <li>
                <a hx-get="{% url 'blogs' %}" hx-target="#container" hx-push-url="true" hx-swap="innerHTML" class="text-gray-700 text-base font-medium hover:text-blue-600 block py-2">Business</a>
            </li>
            <li>
                <a hx-get="{% url 'contact_page' %}" hx-target="#container" hx-push-url="true" hx-swap="innerHTML" class="text-gray-700 text-base font-medium hover:text-blue-600 block py-2">Sports</a>
            </li>
            <li>
                <a hx-get="{% url 'contact_page' %}" hx-target="#container" hx-push-url="true" hx-swap="innerHTML" class="text-gray-700 text-base font-medium hover:text-blue-600 block py-2">Entertainment</a>
            </li>
            <li>
                <a hx-get="{% url 'contact_page' %}" hx-target="#container" hx-push-url="true" hx-swap="innerHTML" class="text-gray-700 text-base font-medium hover:text-blue-600 block py-2">Tech & Startup</a>
            </li>
            <li>
                <a hx-get="{% url 'contact_page' %}" hx-target="#container" hx-push-url="true" hx-swap="innerHTML" class="text-gray-700 text-base font-medium hover:text-blue-600 block py-2">Programming</a>
            </li>
            <li>
                <a hx-get="{% url 'create_blog' %}" hx-target="#container" hx-swap="innerHTML" hx-push-url="true" class="text-gray-700 text-base font-medium hover:text-blue-600 block py-2">Create News</a>
            </li>
            <li>
                <a hx-get="{% url 'create_blog' %}" hx-target="#container" hx-swap="innerHTML" hx-push-url="true" class="text-gray-700 text-base font-medium hover:text-blue-600 block py-2">Contact</a>
            </li>


            <li class="py-2">
                <div class="text-gray-700 text-base font-medium flex items-center justify-between">
                    More Categories
                    <i class="fas fa-chevron-down text-xs ml-1 text-gray-500"></i>
                </div>
                <ul class="pl-4 mt-1 space-y-1 text-sm">
                    {% for category in categories %}
                    <li>
                        <a href="{% url 'category_post' category.slug %}" class="text-gray-600 hover:text-blue-600 block py-1">{{ category.name }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </li>

            <li class="border-t pt-4 mt-2">
                <a href="#" class="block text-center w-full px-3 py-2 border border-blue-600 text-blue-500 hover:bg-gray-100 transition duration-150 rounded-sm font-semibold mb-2">Forum</a>
            </li>
            <li>
                <a href="#" class="block text-center w-full px-3 py-2 border border-gray-600 text-gray-700 hover:bg-blue-50 transition duration-150 rounded-sm font-semibold">Today's News</a>
            </li>
        </ul>
    </div>

    <div id="sidebar-overlay" class="fixed inset-0 bg-black opacity-0 invisible transition-opacity duration-300 z-[59] lg:hidden"></div>
</header>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const menuToggle = document.getElementById('menu-toggle');
        const closeSidebar = document.getElementById('close-sidebar');
        const mobileSidebar = document.getElementById('mobile-sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        const body = document.body;

        function openSidebar() {
            mobileSidebar.classList.remove('translate-x-[-100%]');
            mobileSidebar.classList.add('translate-x-0');
            sidebarOverlay.classList.remove('invisible', 'opacity-0');
            sidebarOverlay.classList.add('visible', 'opacity-50');
            body.classList.add('overflow-hidden');
        }

        function closeSidebarHandler() {
            mobileSidebar.classList.remove('translate-x-0');
            mobileSidebar.classList.add('translate-x-[-100%]');
            sidebarOverlay.classList.remove('visible', 'opacity-50');
            sidebarOverlay.classList.add('invisible', 'opacity-0');
            body.classList.remove('overflow-hidden');
        }

        menuToggle.addEventListener('click', openSidebar);
        closeSidebar.addEventListener('click', closeSidebarHandler);
        sidebarOverlay.addEventListener('click', closeSidebarHandler);
    });
</script>
